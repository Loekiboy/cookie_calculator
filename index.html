<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Patrick+Hand&display=swap" rel="stylesheet">
    <title>Cookie Calculator</title>
    <style>
        body {
        font-family: 'Patrick Hand', cursive; 
        background-color: #ffce91;
        text-align: center;
        padding: 20px;
        font-size: 1.2rem; /* Iets groter maken leest fijn bij handgetekende letters */
        }

        #list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 0;
            max-width: 800px;
            margin: 20px auto;
        }

        li {
            list-style: none;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 2px solid #ffe0b2;
            transition: transform 0.1s;
        }

        li:hover {
            transform: translateY(-1px);
            border-color: #ffb74d;
        }

        #list li {
            font-weight: bold;
            font-size: 1.3rem;
            color: #5d4037;
        }

        li:nth-child(even) {
            transform: rotate(0.5deg);
        }

        li:nth-child(odd) {
            transform: rotate(-0.5deg);
        }

        /* slider */
        .slider-container {
            margin: 30px 0;
            width: 100%;
            max-width: 400px;
            display: inline-block;
        }

        #slider {
            -webkit-appearance: none;
            width: 100%;
            height: 15px;
            background: #e0e0e0;
            outline: none;
            transition: background 0.3s;

        }

        #slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #d84315;
            cursor: pointer;
            border: 3px solid #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            transition: transform 0.1s ease-in-out;
        }
        #slider::-webkit-slider-thumb:active {
            transform: scale(1.3);
            background: #bf350c;
        }

        /* firefox */
        #slider::-moz-range-thumb {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #d84315;
        cursor: pointer;
        border: 3px solid #fff;
        }

        /* shake */
        @keyframes bump {
            0% { transform: scale(1); }
            50% { transform: scale(1.025) rotate(var(--random-deg, 1deg)); }
            100% { transform: scale(1); }
        }

        .bump-effect {
            animation: bump 0.1s ease-out;
        }

    </style>
</head>
<body>

    <h1>Cookie Calculator</h1>

    <p>Number of cookies: <span id="cookieCount">20</span></p>

    <div class="slider-container">
        <input type="range" id="slider" min="1" max="50" value="20">
    </div>


    <ul id="list">    
        </ul>

    <script>
        const slider = document.getElementById('slider');
        const tekst = document.getElementById('cookieCount');
        const lijst = document.getElementById('list')

        const base = 20;

        function bereken() {
            const aantal = slider.value;
            tekst.innerText = aantal;

            const factor = aantal / base;

            const flour = Math.round(281 * factor);
            const butter = Math.round(170 * factor);
            const brownSugar = Math.round(150 * factor);
            const whiteSugar = Math.round(100 * factor);
            const chips = Math.round(225 * factor);

            const vanilla = (2 * factor).toFixed(1);
            const soda = (1 * factor).toFixed(1);
            const salt = (0.5 * factor).toFixed(1);

            // egg logic
            let eggAmount = 1 * factor;
            let eggText = "";
            if (eggAmount < 0.5) {
                eggText = "1 egg (wisked, use half)";
            } else {
                eggText = Math.round(eggAmount) + " eggs";
            }

            lijst.innerHTML = `
                <li>üåæ ${flour}g Flour</li>
                <li>üßà ${butter}g Butter (melted)</li>
                <li>üü§ ${brownSugar}g Brown sugar</li>
                <li>‚ö™ ${whiteSugar}g Granulated sugar</li>
                <li>ü•ö ${eggText}</li>
                <li>üç¶ ${vanilla} tsp Vanilla extract</li>
                <li>üßÇ ${soda} tsp Baking soda</li>
                <li>üßÇ ${salt} tsp Salt</li>
                <li>üç´ ${chips}g Chocolate chips</li>
            `;

        }

        slider.oninput = function() {
            bereken();
            playPop(this.value);

            const cards = document.querySelectorAll('#list li');

            cards.forEach(card => {
                const randomDeg = (Math.random() * 2 - 1) + 'deg';
                card.style.setProperty('--random-deg', randomDeg);
                card.classList.remove('bump-effect');

                void card.offsetWidth;
                card.classList.add('bump-effect');
            });

            if (navigator.vibrate) {
                navigator.vibrate(10);
            }
        };

        bereken();

        

        // audio
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playPop(aantal) {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();

            oscillator.type = 'sine';
            const startFreq = 400 + (aantal * 5);
            oscillator.frequency.setValueAtTime(startFreq, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(10, audioCtx.currentTime + 0.1);

            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.1);

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.1);
            
        }
    </script>

</body>
</html>